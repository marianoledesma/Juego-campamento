<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Campamento - Juego de predicciones</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.2/anime.min.js" defer></script>
  <style>
    :root {
      /* Material Design 3 - Colores Playeros üèñÔ∏è */
      --md-primary: #00B4D8;
      --md-on-primary: #ffffff;
      --md-primary-container: #CAF0F8;
      --md-on-primary-container: #003d52;
      
      --md-secondary: #FF9F1C;
      --md-on-secondary: #ffffff;
      --md-secondary-container: #FFE5B4;
      --md-on-secondary-container: #5c3a00;
      
      --md-tertiary: #06B6D4;
      --md-on-tertiary: #ffffff;
      --md-tertiary-container: #A7F3D0;
      --md-on-tertiary-container: #064e3b;
      
      --md-error: #EF4444;
      --md-on-error: #ffffff;
      --md-error-container: #FECACA;
      --md-on-error-container: #7f1d1d;
      
      --md-background: #FFFEF9;
      --md-on-background: #1a1a1a;
      --md-surface: #FFFFFF;
      --md-on-surface: #1a1a1a;
      --md-surface-variant: #E0F2FE;
      --md-on-surface-variant: #0c4a6e;
      --md-outline: #64B5F6;
      --md-outline-variant: #B3E5FC;
      
      /* Elevaciones */
      --md-elevation-1: 0px 1px 2px rgba(0, 0, 0, 0.3), 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      --md-elevation-2: 0px 1px 2px rgba(0, 0, 0, 0.3), 0px 2px 6px 2px rgba(0, 0, 0, 0.15);
      --md-elevation-3: 0px 4px 8px 3px rgba(0, 0, 0, 0.15), 0px 1px 3px rgba(0, 0, 0, 0.3);
      --md-elevation-4: 0px 6px 10px 4px rgba(0, 0, 0, 0.15), 0px 2px 3px rgba(0, 0, 0, 0.3);
      
      /* Border radius */
      --md-radius-xs: 4px;
      --md-radius-sm: 8px;
      --md-radius-md: 12px;
      --md-radius-lg: 16px;
      --md-radius-xl: 28px;
      --md-radius-full: 9999px;
    }
    * { box-sizing: border-box; }
    
    /* Imagen de fondo de la playa */
    #video-background {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      overflow: hidden;
      z-index: -2;
      background-image: url('assets/Screenshot_2026-02-06_at_21.14.47-68ef46a2-9ddf-46c8-b9fc-7f5421bff88c.png');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
    }
    
    body {
      margin: 0;
      min-height: 100vh;
      font-family: 'Roboto', -apple-system, BlinkMacSystemFont, sans-serif;
      color: var(--md-on-background);
      padding: 0.5rem 1rem 1rem;
      position: relative;
    }
    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(180deg, 
        rgba(135, 206, 235, 0.75) 0%, 
        rgba(202, 240, 248, 0.8) 40%, 
        rgba(255, 229, 180, 0.75) 100%);
      pointer-events: none;
      z-index: -1;
    }
    .contenedor {
      max-width: 1200px;
      margin: 0 auto;
      position: relative;
      z-index: 10;
      padding-bottom: 2rem;
    }
    
    /* BOT√ìN FLOTANTE DE AYUDA (FAB) */
    .btn-flotante-ayuda {
      position: fixed;
      top: 1.5rem;
      right: 1.5rem;
      z-index: 1000;
      width: 60px;
      height: 60px;
      border-radius: var(--md-radius-xl);
      background: rgba(255, 229, 180, 0.95);
      border: none;
      color: var(--md-on-secondary-container);
      font-size: 1.75rem;
      font-weight: 500;
      cursor: pointer;
      box-shadow: var(--md-elevation-4);
      transition: box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1), 
                  transform 0.2s cubic-bezier(0.4, 0, 0.2, 1);
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: inherit;
      backdrop-filter: blur(8px);
    }
    .btn-flotante-ayuda:hover {
      box-shadow: 0 8px 24px rgba(255, 159, 28, 0.4);
      transform: scale(1.08);
    }
    .btn-flotante-ayuda:active {
      transform: scale(0.95);
    }
    
    /* MODAL */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      z-index: 200;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 1rem;
      backdrop-filter: blur(4px);
    }
    .modal-contenido {
      background: rgba(255, 255, 255, 0.98);
      border: none;
      border-radius: var(--md-radius-xl);
      padding: 1.5rem;
      max-width: 500px;
      width: 100%;
      box-shadow: var(--md-elevation-4);
      color: var(--md-on-surface);
      backdrop-filter: blur(12px);
    }
    .modal-contenido h3 {
      margin-top: 0;
      margin-bottom: 0.5rem;
      font-size: 1.5rem;
      font-weight: 500;
      color: var(--md-on-surface);
    }
    .modal-contenido p {
      margin-bottom: 1.5rem;
      color: var(--md-on-surface-variant);
      font-size: 0.95rem;
    }
    .modal-contenido input[type="file"] {
      width: 100%;
      padding: 1rem;
      margin-bottom: 1.5rem;
      background: var(--md-surface-variant);
      color: var(--md-on-surface-variant);
      border: 1px solid var(--md-outline-variant);
      border-radius: var(--md-radius-sm);
      font-family: inherit;
      font-size: 0.95rem;
      cursor: pointer;
      transition: background 0.2s, border-color 0.2s;
    }
    .modal-contenido input[type="file"]:hover {
      background: var(--md-surface);
      border-color: var(--md-outline);
    }
    .archivo-ok {
      padding: 0.75rem;
      margin-bottom: 1rem;
      background: var(--md-tertiary-container);
      color: var(--md-on-tertiary-container);
      border-radius: var(--md-radius-sm);
      font-size: 0.9rem;
      font-weight: 500;
      text-align: center;
    }
    
    /* √ÅREA DE PREGUNTA GRANDE */
    .area-pregunta-grande {
      background: var(--md-primary-container);
      border: none;
      border-radius: var(--md-radius-xl);
      padding: 2.5rem 2rem;
      margin: 0.5rem auto 1.5rem;
      text-align: center;
      box-shadow: var(--md-elevation-3);
      position: relative;
      min-height: 200px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 1.5rem;
      transition: box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      backdrop-filter: blur(8px);
      background: rgba(202, 240, 248, 0.95);
    }
    .area-pregunta-grande:hover {
      box-shadow: var(--md-elevation-4);
    }
    .area-pregunta-grande h2 {
      font-size: clamp(1.75rem, 4.5vw, 3.5rem);
      line-height: 1.25;
      margin: 0 0 1.5rem 0;
      color: var(--md-on-primary-container);
      font-weight: 500;
      letter-spacing: -0.02em;
    }
    
    /* NAVEGACI√ìN DE PREGUNTAS */
    .navegacion-preguntas {
      display: flex;
      gap: 1rem;
      align-items: center;
      justify-content: center;
      flex-wrap: wrap;
      width: 100%;
    }
    .btn-nav {
      padding: 0.75rem 1.75rem;
      font-family: inherit;
      font-size: 1.1rem;
      font-weight: 500;
      background: var(--md-primary);
      color: var(--md-on-primary);
      border: none;
      border-radius: var(--md-radius-full);
      cursor: pointer;
      transition: background 0.2s cubic-bezier(0.4, 0, 0.2, 1),
                  box-shadow 0.2s cubic-bezier(0.4, 0, 0.2, 1),
                  transform 0.1s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: var(--md-elevation-1);
      letter-spacing: 0.01em;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      min-width: 130px;
    }
    .btn-nav:hover {
      box-shadow: var(--md-elevation-2);
      filter: brightness(1.1);
    }
    .btn-nav:active {
      transform: scale(0.98);
      box-shadow: var(--md-elevation-1);
    }
    .btn-nav:disabled {
      opacity: 0.38;
      cursor: not-allowed;
      box-shadow: none;
    }
    #btn-pregunta-anterior::before {
      content: '‚Äπ';
      font-size: 1.8rem;
      line-height: 0.8;
      font-weight: 300;
    }
    #btn-pregunta-siguiente::after {
      content: '‚Ä∫';
      font-size: 1.8rem;
      line-height: 0.8;
      font-weight: 300;
    }
    .contador-pregunta {
      font-size: 1.05rem;
      font-weight: 600;
      color: var(--md-on-primary-container);
      padding: 0.75rem 1.5rem;
      background: rgba(255,255,255,0.75);
      border-radius: var(--md-radius-full);
      letter-spacing: 0.02em;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }
    /* √ÅREA DE PREDICCIONES */
    .area-predicciones {
      background: rgba(255, 255, 255, 0.95);
      border: none;
      border-radius: var(--md-radius-xl);
      padding: 1.5rem;
      margin-bottom: 2rem;
      box-shadow: var(--md-elevation-3);
      transition: box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      backdrop-filter: blur(8px);
    }
    .area-predicciones:hover {
      box-shadow: var(--md-elevation-4);
    }
    .area-predicciones h3 {
      margin: 0 0 1.5rem 0;
      font-size: 1.375rem;
      font-weight: 500;
      text-align: center;
      color: var(--md-on-surface);
      letter-spacing: -0.01em;
    }
    
    /* BOT√ìN REVELAR */
    .btn-flotante-revelar {
      padding: 1.25rem 2.5rem;
      font-family: inherit;
      font-size: 1.25rem;
      font-weight: 600;
      letter-spacing: 0.05em;
      color: var(--md-on-primary);
      border: none;
      border-radius: var(--md-radius-xl);
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 0.75rem;
      background: var(--md-primary);
      box-shadow: var(--md-elevation-4);
      transition: transform 0.2s cubic-bezier(0.4, 0, 0.2, 1), 
                  box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      white-space: nowrap;
      margin: 0 auto;
    }
    .btn-flotante-revelar:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 24px rgba(0, 180, 216, 0.4);
    }
    .btn-flotante-revelar:active {
      transform: scale(0.97);
      box-shadow: var(--md-elevation-3);
    }
    .btn-revelar-container {
      text-align: center;
      margin: 2rem 0;
      padding: 0 1rem;
    }
    .btn-flotante-revelar .cta-icon {
      font-size: 1.35em;
      line-height: 1;
    }
    .btn-flotante-revelar .cta-text {
      font-weight: 500;
      letter-spacing: 0.02em;
    }
    .equipos-config {
      margin: 0;
    }
    .equipos-inputs {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 1rem;
    }
    .input-fila-item {
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
      background: var(--md-surface-variant);
      padding: 0.875rem;
      border-radius: var(--md-radius-md);
      border: none;
      transition: background 0.2s;
    }
    .input-fila-item:hover {
      background: var(--md-secondary-container);
    }
    .input-fila-item label {
      font-size: 1rem;
      font-weight: 600;
      text-align: center;
      color: var(--md-on-surface-variant);
      letter-spacing: 0.05em;
    }
    .input-pred {
      padding: 0.75rem;
      font-size: 1.5rem;
      font-family: inherit;
      border-radius: var(--md-radius-sm);
      border: 2px solid var(--md-primary);
      background: var(--md-surface);
      color: var(--md-on-surface);
      font-weight: 500;
      text-align: center;
      transition: border-color 0.2s, box-shadow 0.2s, transform 0.1s;
    }
    .input-pred:focus {
      outline: none;
      border-color: var(--md-primary);
      box-shadow: 0 0 0 3px rgba(0, 100, 151, 0.2);
      transform: scale(1.02);
    }
    /* Resultado revelado */
    .resultado-revelado {
      background: rgba(167, 243, 208, 0.95);
      border: none;
      border-radius: var(--md-radius-xl);
      padding: 2rem;
      margin: 1.5rem 0;
      text-align: center;
      box-shadow: var(--md-elevation-4);
      animation: resultadoEntra 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards;
      backdrop-filter: blur(10px);
    }
    @keyframes resultadoEntra {
      from { opacity: 0; transform: scale(0.92) translateY(-8px); }
      to { opacity: 1; transform: scale(1) translateY(0); }
    }
    .resultado-revelado .respuesta-correcta {
      font-size: clamp(1.375rem, 3vw, 2.25rem);
      font-weight: 500;
      margin-bottom: 1rem;
      color: var(--md-on-tertiary-container);
      letter-spacing: -0.01em;
    }
    .resultado-revelado .ganador-texto {
      font-size: clamp(1.125rem, 2.25vw, 1.75rem);
      font-weight: 500;
      color: var(--md-on-tertiary-container);
      letter-spacing: -0.01em;
    }
    .btn {
      padding: 0.625rem 1.5rem;
      font-size: 0.95rem;
      font-family: inherit;
      font-weight: 500;
      border: none;
      border-radius: var(--md-radius-full);
      cursor: pointer;
      transition: transform 0.2s cubic-bezier(0.4, 0, 0.2, 1), 
                  box-shadow 0.2s cubic-bezier(0.4, 0, 0.2, 1);
      letter-spacing: 0.01em;
    }
    .btn:hover { 
      transform: scale(1.02);
      box-shadow: var(--md-elevation-2);
    }
    .btn:active { 
      transform: scale(0.98);
      box-shadow: var(--md-elevation-1);
    }
    .btn-primario {
      background: var(--md-primary);
      color: var(--md-on-primary);
      box-shadow: var(--md-elevation-1);
    }
    .btn-primario:hover { 
      box-shadow: var(--md-elevation-2);
      filter: brightness(1.1);
    }
    .btn-secundario {
      background: var(--md-secondary);
      color: var(--md-on-secondary);
      box-shadow: var(--md-elevation-1);
    }
    .btn-secundario:hover { 
      box-shadow: var(--md-elevation-2);
      filter: brightness(1.1);
    }
    .btn-chico {
      padding: 0.5rem 1rem;
      font-size: 0.875rem;
    }
    .oculto { display: none !important; }
    /* Contenedor de confetti/part√≠culas */
    #confetti-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 9999;
      overflow: hidden;
    }
    .confetti {
      position: absolute;
      width: 10px;
      height: 10px;
      border-radius: 2px;
    }
    /* Toast / Snackbar Material Design */
    .toast-playero {
      position: fixed;
      top: 1.5rem;
      left: 50%;
      transform: translateX(-50%) translateY(-100px);
      z-index: 10000;
      padding: 0.875rem 1.5rem;
      border-radius: var(--md-radius-md);
      font-family: inherit;
      font-size: 0.95rem;
      font-weight: 500;
      color: var(--md-on-secondary-container);
      text-align: center;
      white-space: nowrap;
      max-width: 90vw;
      overflow: hidden;
      text-overflow: ellipsis;
      pointer-events: none;
      opacity: 0;
      transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.2s ease;
      background: rgba(255, 229, 180, 0.98);
      box-shadow: var(--md-elevation-4);
      backdrop-filter: blur(8px);
    }
    .toast-playero.toast-visible {
      transform: translateX(-50%) translateY(0);
      opacity: 1;
    }
    .toast-playero.toast-sale {
      transform: translateX(-50%) translateY(-80px);
      opacity: 0;
    }
    .toast-playero .toast-icon {
      margin-right: 0.375rem;
      font-size: 1.15em;
    }

    /* RESPONSIVE */
    @media (max-width: 768px) {
      .btn-flotante-ayuda {
        top: 0.75rem;
        right: 0.75rem;
        width: 48px;
        height: 48px;
        font-size: 1.35rem;
      }
      .area-pregunta-grande {
        margin: 0.5rem auto 1rem;
        padding: 1.75rem 1.25rem;
      }
      .area-predicciones {
        padding: 1.25rem;
      }
      .equipos-inputs {
        grid-template-columns: 1fr;
      }
      .btn-flotante-revelar {
        padding: 1rem 2rem;
        font-size: 1.1rem;
      }
      .btn-flotante-revelar:hover {
        transform: translateY(-2px);
      }
      .btn-flotante-revelar:active {
        transform: scale(0.97);
      }
      .btn-revelar-container {
        margin: 1.5rem 0;
      }
      .navegacion-preguntas {
        flex-direction: column;
        width: 100%;
        gap: 0.75rem;
      }
      .btn-nav {
        width: 100%;
        max-width: 280px;
      }
      .contador-pregunta {
        order: -1;
        margin-bottom: 0.25rem;
      }
    }
  </style>
</head>
<body>
  <!-- Imagen de fondo de la playa -->
  <div id="video-background"></div>
  
  <div id="confetti-container" aria-hidden="true"></div>
  <div id="toast-playero" class="toast-playero oculto" role="status" aria-live="polite"></div>
  
  <!-- BOT√ìN FLOTANTE üèùÔ∏è PARA CARGAR RESPUESTAS -->
  <button type="button" class="btn-flotante-ayuda animate__animated animate__fadeInDown" id="btn-flotante-ayuda" aria-label="Cargar respuestas desde JSON">
    üèùÔ∏è
  </button>

  <!-- Modal para cargar respuestas -->
  <div class="modal-overlay oculto" id="modal-respuestas">
    <div class="modal-contenido animate__animated animate__zoomIn">
      <h3>üèñÔ∏è Cargar respuestas</h3>
      <p>Selecciona el archivo JSON con las respuestas correctas:</p>
      <input type="file" id="input-archivo-respuestas" accept=".json" />
      <div class="archivo-ok oculto" id="archivo-ok" aria-live="polite"></div>
      <button type="button" class="btn btn-secundario" id="btn-cerrar-modal">Cerrar</button>
    </div>
  </div>

  <div class="contenedor">
    <!-- √ÅREA DE PREGUNTA GRANDE (para proyecci√≥n al p√∫blico) -->
    <div class="area-pregunta-grande animate__animated animate__fadeInUp">
      <h2 id="texto-pregunta">üåä ¬øCu√°nto sale un choclo de la playa?</h2>
      <div class="navegacion-preguntas">
        <button type="button" class="btn-nav" id="btn-pregunta-anterior" aria-label="Pregunta anterior">Anterior</button>
        <span class="contador-pregunta" id="contador-pregunta">üèÑ Pregunta 1 de 20</span>
        <button type="button" class="btn-nav" id="btn-pregunta-siguiente" aria-label="Pregunta siguiente">Siguiente</button>
      </div>
    </div>

    <!-- √ÅREA DE PREDICCIONES (donde los equipos ingresan) -->
    <div class="area-predicciones animate__animated animate__fadeIn">
      <h3>üèñÔ∏è Los equipos ingresan sus predicciones</h3>
      <div class="equipos-config">
        <div class="equipos-inputs">
          <div class="input-fila-item">
            <label id="label-equipo-0">Equipo 1</label>
            <input type="text" class="input-pred" data-equipo="0" placeholder="500" inputmode="numeric" />
          </div>
          <div class="input-fila-item">
            <label id="label-equipo-1">Equipo 2</label>
            <input type="text" class="input-pred" data-equipo="1" placeholder="500" inputmode="numeric" />
          </div>
          <div class="input-fila-item">
            <label id="label-equipo-2">Equipo 3</label>
            <input type="text" class="input-pred" data-equipo="2" placeholder="500" inputmode="numeric" />
          </div>
          <div class="input-fila-item">
            <label id="label-equipo-3">Equipo 4</label>
            <input type="text" class="input-pred" data-equipo="3" placeholder="500" inputmode="numeric" />
          </div>
          <div class="input-fila-item">
            <label id="label-equipo-4">Equipo 5</label>
            <input type="text" class="input-pred" data-equipo="4" placeholder="500" inputmode="numeric" />
          </div>
          <div class="input-fila-item">
            <label id="label-equipo-5">Equipo 6</label>
            <input type="text" class="input-pred" data-equipo="5" placeholder="500" inputmode="numeric" />
          </div>
        </div>
      </div>
    </div>

    <!-- BOT√ìN REVELAR -->
    <div class="btn-revelar-container">
      <button type="button" class="btn-flotante-revelar animate__animated animate__pulse animate__infinite" id="btn-revelar-cta" aria-label="Revelar respuesta y ver ganador">
        <span class="cta-icon" aria-hidden="true">üåü</span>
        <span class="cta-text">REVELAR</span>
      </button>
    </div>

    <!-- RESULTADO REVELADO -->
    <div id="resultado" class="resultado-revelado oculto"></div>
  </div>

  <script>
    const PREGUNTAS = [
      // --- Las 7 Originales (Intactas) ---
      { texto: 'üåΩ ¬øCu√°nto sale un choclo de la playa?', tipo: 'numero', placeholder: 'Ej: 500' },
      { texto: 'üëï ¬øCu√°ntas remeras trajo ‚Ä¶ al campamento?', tipo: 'numero', placeholder: 'Ej: 3' },
      { texto: 'üö∂ ¬øCu√°nta distancia (km) caminando hay del predio a Iglesia del Salvador?', tipo: 'numero', placeholder: 'Ej: 2.5' },
      { texto: 'üí∞ ¬øCu√°nta plata tiene en Mercado Pago ‚Ä¶?', tipo: 'numero', placeholder: 'Ej: 15000' },
      { texto: 'üõèÔ∏è ¬øCu√°ntas camas tiene el predio?', tipo: 'numero', placeholder: 'Ej: 20' },
      { texto: 'üì± ¬øCu√°ntos posteos en Instagram tiene ‚Ä¶?', tipo: 'numero', placeholder: 'Ej: 42' },
      { texto: '‚è∞ ¬øA qu√© hora tiene seteada la alarma ‚Ä¶?', tipo: 'hora', placeholder: '08:30' },

      // --- Nuevas (Digitales / Celular) ---
      { texto: 'üîã ¬øQu√© porcentaje de bater√≠a tiene el celular de ‚Ä¶ ya mismo?', tipo: 'numero', placeholder: 'Ej: 64' },
      { texto: 'üí¨ ¬øCu√°ntos chats sin leer tiene ‚Ä¶ en WhatsApp?', tipo: 'numero', placeholder: 'Ej: 12' },
      { texto: 'üö´ ¬øCu√°ntos contactos tiene BLOQUEADOS ‚Ä¶ en WhatsApp?', tipo: 'numero', placeholder: 'Ej: 5' },
      { texto: 'üì∏ ¬øCu√°ntas fotos tiene en total en la galer√≠a ‚Ä¶?', tipo: 'numero', placeholder: 'Ej: 2450' },
      { texto: 'üåê ¬øCu√°ntas pesta√±as del navegador tiene abiertas ‚Ä¶?', tipo: 'numero', placeholder: 'Ej: 18' },
      { texto: 'üì© ¬øCu√°ntos correos sin leer marca el √≠cono del mail de ‚Ä¶?', tipo: 'numero', placeholder: 'Ej: 1500' },
      { texto: 'üë• ¬øA cu√°ntas personas sigue ‚Ä¶ en Instagram?', tipo: 'numero', placeholder: 'Ej: 350' },
      { texto: 'ü§≥ ¬øCu√°ntas selfies se sac√≥ ‚Ä¶ en lo que va del d√≠a?', tipo: 'numero', placeholder: 'Ej: 2' },

      // --- Nuevas (Contexto Cristiano / Campamento / Curiosidades) ---
      { texto: 'üî• ¬øDe cu√°ntos d√≠as es la racha de Biblia (YouVersion) de ‚Ä¶?', tipo: 'numero', placeholder: 'Ej: 45' },
      { texto: 'üôè ¬øCu√°ntos a√±os hace que ‚Ä¶ asiste a la iglesia?', tipo: 'numero', placeholder: 'Ej: 4' },
      { texto: 'üëü ¬øCu√°nto calza (talle de zapatillas) ‚Ä¶?', tipo: 'numero', placeholder: 'Ej: 40' },
      { texto: 'üß¶ ¬øCu√°ntos pares de medias trajo ‚Ä¶?', tipo: 'numero', placeholder: 'Ej: 6' },
      { texto: 'üîå ¬øCu√°ntos cables/cargadores trajo ‚Ä¶ en la mochila?', tipo: 'numero', placeholder: 'Ej: 2' },
      { texto: 'üß¥ ¬øDe cu√°nto es el factor del protector solar de ‚Ä¶?', tipo: 'numero', placeholder: 'Ej: 50' }
    ];

    const equipos = ['Equipo 1', 'Equipo 2', 'Equipo 3', 'Equipo 4', 'Equipo 5', 'Equipo 6'];
    let preguntaActual = 0;
    let prediccionesPorPregunta = {}; // { preguntaIdx: { equipoIdx: valor } }
    let respuestasDesdeArchivo = null;

    // Cargar respuestas desde archivo
    function aplicarRespuestasCargadas() {
      const ok = document.getElementById('archivo-ok');
      if (respuestasDesdeArchivo) {
        if (ok) { ok.textContent = '‚úÖ Respuestas cargadas correctamente'; ok.classList.remove('oculto'); }
      } else {
        if (ok) ok.classList.add('oculto');
      }
    }
    fetch('respuestas.json')
      .then(r => r.ok ? r.json() : Promise.reject())
      .then(data => {
        respuestasDesdeArchivo = typeof data === 'object' && data !== null ? data : null;
        aplicarRespuestasCargadas();
      })
      .catch(() => { aplicarRespuestasCargadas(); });

    // Referencias DOM
    const textoPregunta = document.getElementById('texto-pregunta');
    const contadorPregunta = document.getElementById('contador-pregunta');
    const btnPreguntaAnterior = document.getElementById('btn-pregunta-anterior');
    const btnPreguntaSiguiente = document.getElementById('btn-pregunta-siguiente');
    const btnRevelarCta = document.getElementById('btn-revelar-cta');
    const resultadoDiv = document.getElementById('resultado');
    const btnFlotanteAyuda = document.getElementById('btn-flotante-ayuda');
    const modalRespuestas = document.getElementById('modal-respuestas');
    const btnCerrarModal = document.getElementById('btn-cerrar-modal');
    const inputArchivoRespuestas = document.getElementById('input-archivo-respuestas');

    function esPreguntaHora() {
      return PREGUNTAS[preguntaActual].tipo === 'hora';
    }

    function lanzarConfetti() {
      const container = document.getElementById('confetti-container');
      if (!container || typeof anime === 'undefined') return;
      container.innerHTML = '';
      const colores = ['#00B4D8', '#FF9F1C', '#06B6D4', '#FFE5B4', '#A7F3D0', '#FFB703', '#CAF0F8'];
      const fragmentos = [];
      for (let i = 0; i < 55; i++) {
        const el = document.createElement('div');
        el.className = 'confetti';
        el.style.left = '50%';
        el.style.top = '40%';
        el.style.background = colores[Math.floor(Math.random() * colores.length)];
        el.style.width = (6 + Math.random() * 8) + 'px';
        el.style.height = (6 + Math.random() * 8) + 'px';
        el.style.borderRadius = Math.random() > 0.5 ? '50%' : '2px';
        container.appendChild(el);
        fragmentos.push(el);
      }
      fragmentos.forEach((el, i) => {
        const ang = (Math.PI * 2 * i) / fragmentos.length + Math.random() * 2;
        const dist = 150 + Math.random() * 200;
        const tx = Math.cos(ang) * dist + (Math.random() - 0.5) * 100;
        const ty = Math.sin(ang) * dist + (Math.random() - 0.5) * 100;
        anime({
          targets: el,
          translateX: tx,
          translateY: ty,
          rotate: Math.random() * 720 - 360,
          opacity: [1, 0],
          duration: 1200 + Math.random() * 400,
          delay: i * 20,
          easing: 'easeOutQuad',
          complete: () => el.remove()
        });
      });
    }

    function actualizarUI() {
      const p = PREGUNTAS[preguntaActual];
      textoPregunta.textContent = p.texto;
      contadorPregunta.textContent = `üèÑ Pregunta ${preguntaActual + 1}`;
      
      // Actualizar placeholders
      const inputsPred = document.querySelectorAll('.input-pred');
      inputsPred.forEach(inp => {
        inp.placeholder = p.placeholder;
      });

      // Actualizar botones de navegaci√≥n
      btnPreguntaAnterior.disabled = preguntaActual === 0;
      btnPreguntaSiguiente.disabled = preguntaActual === PREGUNTAS.length - 1;

      // Ocultar resultado al cambiar de pregunta
      resultadoDiv.classList.add('oculto');

      // Cargar predicciones si ya existen para esta pregunta
      cargarPrediccionesActuales();
    }

    function cargarPrediccionesActuales() {
      const predicciones = prediccionesPorPregunta[preguntaActual] || {};
      const inputsPred = document.querySelectorAll('.input-pred');
      inputsPred.forEach(inp => {
        const equipoIdx = parseInt(inp.dataset.equipo, 10);
        const valor = predicciones[equipoIdx];
        if (valor !== undefined) {
          inp.value = formatValor(valor, esPreguntaHora());
        } else {
          inp.value = '';
        }
      });
    }

    // Modal de respuestas
    if (btnFlotanteAyuda) {
      btnFlotanteAyuda.addEventListener('click', () => {
        modalRespuestas.classList.remove('oculto');
      });
    }
    
    if (btnCerrarModal) {
      btnCerrarModal.addEventListener('click', () => {
        modalRespuestas.classList.add('oculto');
      });
    }

    if (modalRespuestas) {
      modalRespuestas.addEventListener('click', (e) => {
        if (e.target === modalRespuestas) {
          modalRespuestas.classList.add('oculto');
        }
      });
    }

    if (inputArchivoRespuestas) {
      inputArchivoRespuestas.addEventListener('change', () => {
        const file = inputArchivoRespuestas.files[0];
        if (!file) return;
        const reader = new FileReader();
        reader.onload = (e) => {
          try {
            const data = JSON.parse(e.target.result);
            respuestasDesdeArchivo = typeof data === 'object' && data !== null ? data : null;
          } catch (err) {
            respuestasDesdeArchivo = null;
          }
          aplicarRespuestasCargadas();
        };
        reader.readAsText(file);
      });
    }

    // Navegaci√≥n de preguntas
    if (btnPreguntaAnterior) {
      btnPreguntaAnterior.addEventListener('click', () => {
        if (preguntaActual > 0) {
          guardarPrediccionesActuales();
          preguntaActual--;
          actualizarUI();
        }
      });
    }

    if (btnPreguntaSiguiente) {
      btnPreguntaSiguiente.addEventListener('click', () => {
        if (preguntaActual < PREGUNTAS.length - 1) {
          guardarPrediccionesActuales();
          preguntaActual++;
          actualizarUI();
        }
      });
    }

    function guardarPrediccionesActuales() {
      const inputsPred = document.querySelectorAll('.input-pred');
      const predicciones = {};
      inputsPred.forEach(inp => {
        const equipoIdx = parseInt(inp.dataset.equipo, 10);
        const val = parseValorInput(inp.value, esPreguntaHora());
        if (val !== null) {
          predicciones[equipoIdx] = val;
        }
      });
      if (Object.keys(predicciones).length > 0) {
        prediccionesPorPregunta[preguntaActual] = predicciones;
      }
    }

    function parseValorInput(texto, esHora) {
      const t = String(texto || '').trim().replace(',', '.');
      if (!t) return null;
      if (esHora) {
        const part = t.split(':');
        const h = parseInt(part[0], 10);
        const m = part.length > 1 ? parseInt(part[1], 10) : 0;
        if (isNaN(h)) return null;
        return h * 60 + (isNaN(m) ? 0 : m);
      }
      const n = parseFloat(t);
      return isNaN(n) ? null : n;
    }

    function formatValor(valor, esHora) {
      if (esHora) {
        const h = Math.floor(valor / 60);
        const m = Math.round(valor % 60);
        return (h < 10 ? '0' : '') + h + ':' + (m < 10 ? '0' : '') + m;
      }
      return Number.isInteger(valor) ? String(valor) : String(valor);
    }

    function escapeHtml(s) {
      const div = document.createElement('div');
      div.textContent = s;
      return div.innerHTML;
    }

    function parseRespuestaCorrecta(preguntaIdx, esHora) {
      const desdeArchivo = respuestasDesdeArchivo && respuestasDesdeArchivo[String(preguntaIdx)] != null
        ? String(respuestasDesdeArchivo[String(preguntaIdx)]).trim()
        : '';
      if (!desdeArchivo) return null;
      if (esHora) {
        const part = desdeArchivo.replace(',', '.').split(':');
        const h = parseInt(part[0], 10);
        const m = part.length > 1 ? parseInt(part[1], 10) : 0;
        if (isNaN(h)) return null;
        return h * 60 + (isNaN(m) ? 0 : m);
      }
      const n = parseFloat(desdeArchivo.replace(',', '.'));
      return isNaN(n) ? null : n;
    }

    function revelar() {
      // Guardar predicciones actuales
      guardarPrediccionesActuales();

      // Verificar que haya predicciones para la pregunta actual
      const predicciones = prediccionesPorPregunta[preguntaActual];
      if (!predicciones || Object.keys(predicciones).length === 0) {
        alert('Ingres√° las predicciones de los equipos antes de revelar.');
        return;
      }

      // Verificar que haya respuesta correcta
      const pregunta = PREGUNTAS[preguntaActual];
      const correcta = parseRespuestaCorrecta(preguntaActual, pregunta.tipo === 'hora');
      if (correcta === null) {
        alert('No hay respuesta correcta para esta pregunta en respuestas.json. Carg√° el archivo desde el bot√≥n "?".');
        return;
      }

      // Calcular distancias y encontrar ganadores
      const distancias = [];
      const equiposIdx = [];
      for (let i = 0; i < 6; i++) {
        if (predicciones[i] !== undefined) {
          distancias.push(Math.abs(predicciones[i] - correcta));
          equiposIdx.push(i);
        }
      }

      if (distancias.length === 0) {
        alert('No hay predicciones para revelar.');
        return;
      }

      const minDist = Math.min(...distancias);
      const ganadoresIdx = equiposIdx.filter((idx, i) => distancias[i] === minDist);

      // Mostrar resultado
      const nombreGanador = ganadoresIdx.length > 1 
        ? ganadoresIdx.map(i => equipos[i]).join(' y ') 
        : equipos[ganadoresIdx[0]];
      
      const html = '<div class="respuesta-correcta animate__animated animate__bounceIn">‚ú® Respuesta correcta: ' + escapeHtml(formatValor(correcta, pregunta.tipo === 'hora')) + '</div>' +
                   '<div class="ganador-texto animate__animated animate__tada animate__delay-1s">' + (ganadoresIdx.length > 1 ? 'üéâ ¬°Empate! ' : 'üèÜ Ganador: ') + escapeHtml(nombreGanador) + '</div>';
      resultadoDiv.innerHTML = html;
      resultadoDiv.classList.remove('oculto');

      setTimeout(() => lanzarConfetti(), 350);
      mostrarToastRevelado(nombreGanador, ganadoresIdx.length > 1);
    }

    function mostrarToastRevelado(nombreGanador, esEmpate) {
      const toast = document.getElementById('toast-playero');
      if (!toast) return;
      const mensaje = esEmpate ? 'üéâ ¬°Empate! ' + nombreGanador : 'üèÜ ¬°Ganador: ' + nombreGanador + '! üåä';
      toast.innerHTML = '<span class="toast-icon">üèñÔ∏è</span>' + mensaje;
      toast.classList.remove('oculto', 'toast-sale');
      toast.setAttribute('aria-label', esEmpate ? 'Empate' : 'Ganador: ' + nombreGanador);
      requestAnimationFrame(() => toast.classList.add('toast-visible'));
      clearTimeout(toast._timeout);
      toast._timeout = setTimeout(() => {
        toast.classList.add('toast-sale');
        setTimeout(() => {
          toast.classList.remove('toast-visible');
          toast.classList.add('oculto');
        }, 400);
      }, 3200);
    }

    // Bot√≥n revelar
    if (btnRevelarCta) btnRevelarCta.addEventListener('click', revelar);

    // Atajo de teclado para revelar (Espacio)
    document.addEventListener('keydown', (e) => {
      if (e.code === 'Space' && e.target.tagName !== 'INPUT' && e.target.tagName !== 'SELECT' && e.target.tagName !== 'TEXTAREA') {
        e.preventDefault();
        revelar();
      }
    });

    // Inicializaci√≥n
    actualizarUI();

    // Animaciones de entrada - Material Motion
    if (typeof anime !== 'undefined') {
      anime({
        targets: '.area-pregunta-grande',
        opacity: [0, 1],
        translateY: [20, 0],
        duration: 450,
        easing: 'cubicBezier(0.4, 0, 0.2, 1)'
      });
      anime({
        targets: '.area-predicciones',
        opacity: [0, 1],
        scale: [0.96, 1],
        duration: 400,
        delay: 100,
        easing: 'cubicBezier(0.4, 0, 0.2, 1)'
      });
      anime({
        targets: '.btn-flotante-revelar',
        opacity: [0, 1],
        scale: [0.92, 1],
        duration: 350,
        delay: 200,
        easing: 'cubicBezier(0.4, 0, 0.2, 1)'
      });
      anime({
        targets: '.btn-flotante-ayuda',
        opacity: [0, 1],
        scale: [0.92, 1],
        duration: 350,
        delay: 250,
        easing: 'cubicBezier(0.4, 0, 0.2, 1)'
      });
    }
  </script>
</body>
</html>
